"use strict";var form=document.querySelector(".js-form"),input=document.querySelector(".js-input"),btn=document.querySelector(".js-btn"),list=document.querySelector(".bookmarks-list");btn.addEventListener("click",handlerAddNote);var lists=void 0;function handlerAddNote(e){e.preventDefault();e.target;var t=input.value;lists.includes(t)?alert("Такой адрес существует!"):checkURL(t)&&lists.push(t),form.reset(),localStorage.lists=JSON.stringify(lists),createList(t)}function checkURL(e){return/^(?:(?:https?|ftp|telnet):\/\/(?:[a-z0-9_-]{1,32}(?::[a-z0-9_-]{1,32})?@)?)?(?:(?:[a-z0-9-]{1,128}\.)+(?:com|net|org|mil|edu|arpa|ru|gov|biz|info|aero|inc|name|[a-z]{2})|(?!0)(?:(?!0[^.]|255)[0-9]{1,3}\.){3}(?!0|255)[0-9]{1,3})(?:\/[a-z0-9.,_@%&?+=\~\/-]*)?(?:#[^ \'\"&<>]*)?$/i.test(e)}window.onload=function(){lists=localStorage.getItem("links")?JSON.parse(localStorage.getItem("links")):[],createList(lists)};var items=document.querySelectorAll(".list-item");function createList(e){var t=document.querySelector("#js_markup").innerHTML.trim(),r=Handlebars.compile(t)(e);return list.insertAdjacentHTML("afterbegin",r),list}function deleteItem(e){e.target.nodeName;var t=e.target.parentNode;"BUTTON"&&t.remove()}list.addEventListener("click",deleteItem);form=document.querySelector(".js-form"),input=document.querySelector(".js-input"),btn=document.querySelector(".js-btn");var listWrapper=document.querySelector(".bookmarks-list"),source=document.querySelector("#js_markup").innerHTML.trim(),template=Handlebars.compile(source),links=void 0;function checkURL(e){return/^(?:(?:https?|ftp|telnet):\/\/(?:[a-z0-9_-]{1,32}(?::[a-z0-9_-]{1,32})?@)?)?(?:(?:[a-z0-9-]{1,128}\.)+(?:com|net|org|mil|edu|arpa|ru|gov|biz|info|aero|inc|name|[a-z]{2})|(?!0)(?:(?!0[^.]|255)[0-9]{1,3}\.){3}(?!0|255)[0-9]{1,3})(?:\/[a-z0-9.,_@%&?+=\~\/-]*)?(?:#[^ \'\"&<>]*)?$/i.test(e)}function createList(e){var t=e.reduce(function(e,t){return e+template({name:"Site:"+t,url:t,descr:"descr",img:"..."})},"");listWrapper.insertAdjacentHTML("afterbegin",t),console.log("CreateList")}function handlerAddNote(e){e.preventDefault();e.target;var t=input.value;links.includes(t)?alert("Такой адрес существует!"):checkURL(t)&&links.push(t),checkURL(t)&&createList([t]),form.reset(),localStorage.links=JSON.stringify(links),console.log(links)}function deleteItem(e){e.target.nodeName;var t=e.target.parentNode,r=e.target.previousSibling.href,n=links.indexOf(r);"BUTTON"&&t.remove(),localStorage.removeItem(links.splice(n,1)),console.log(links),console.log(r),console.log(n),localStorage.links=JSON.stringify(links)}window.onload=function(){links=localStorage.getItem("links")?JSON.parse(localStorage.getItem("links")):[],createList(links)},listWrapper.addEventListener("click",deleteItem),btn.addEventListener("click",handlerAddNote);